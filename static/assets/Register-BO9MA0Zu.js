import{_ as P,h as y,r as p,c as R,a as s,w as o,b as c,j as a,k as C,f as u,l as U,o as h,m as d,n as q}from"./index-C5kSJgGr.js";const B={class:"register-container"},E={class:"login-link"},F={__name:"Register",emits:["registerSuccess"],setup(I,{emit:N}){const{appContext:g}=y(),f=g.config.globalProperties.$axios,_=U(),m=p(null),r=p({username:"",password:"",confirmPassword:"",category:"register"}),w={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能小于6位",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:(i,e,t)=>{e!==r.value.password?t(new Error("两次输入密码不一致")):t()},trigger:"blur"}]},v=()=>{m.value.validate(i=>{i?f.post("/register",r.value).then(e=>{console.log(e.data),e.data.message==="注册成功"?(d.success("注册成功"),q.post("http://localhost:5001/record",{username:r.value.username}),_.push("/login")):(console.log(e.data.message),d.error("用户名已存在"))}):d.error("请检查填写的字段")})};return(i,e)=>{const t=a("el-input"),n=a("el-form-item"),x=a("el-button"),b=a("router-link"),V=a("el-form"),k=a("el-card");return h(),R("div",B,[s(k,{class:"register-box"},{default:o(()=>[e[6]||(e[6]=c("h2",{class:"register-title"},"用户注册",-1)),s(V,{model:r.value,rules:w,ref_key:"registerFormRef",ref:m,onSubmit:C(v,["prevent"])},{default:o(()=>[s(n,{prop:"username"},{default:o(()=>[s(t,{modelValue:r.value.username,"onUpdate:modelValue":e[0]||(e[0]=l=>r.value.username=l),placeholder:"请输入用户名","prefix-icon":"User"},null,8,["modelValue"])]),_:1}),s(n,{prop:"password"},{default:o(()=>[s(t,{modelValue:r.value.password,"onUpdate:modelValue":e[1]||(e[1]=l=>r.value.password=l),type:"password",placeholder:"请输入密码","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),s(n,{prop:"confirmPassword"},{default:o(()=>[s(t,{modelValue:r.value.confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=l=>r.value.confirmPassword=l),type:"password",placeholder:"请确认密码","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),s(n,null,{default:o(()=>[s(x,{type:"primary","native-type":"submit",class:"register-btn"},{default:o(()=>e[3]||(e[3]=[u(" 立即注册 ")])),_:1})]),_:1}),c("div",E,[e[5]||(e[5]=u(" 已有账号？ ")),s(b,{to:"/login"},{default:o(()=>e[4]||(e[4]=[u("立即登录")])),_:1})])]),_:1},8,["model"])]),_:1})])}}},S=P(F,[["__scopeId","data-v-84e11a25"]]);export{S as default};
