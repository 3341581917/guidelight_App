import{r as u,B as m,c as r,F as _,C as f,o as c}from"./index-C5kSJgGr.js";const k={class:"video-container"},p=["src","alt"],v={__name:"feature_track",setup(g){const o=u([]),a=new WebSocket("ws://localhost:5174/socket.io/?EIO=4&transport=websocket");return a.onopen=()=>{console.log("WebSocket 已连接")},a.onmessage=t=>{const s=t.data;if(s.startsWith("42"))try{const e=JSON.parse(s.slice(2));if(e[0]==="video_stream"){const{id:n,frame:i}=e[1],l=o.value.findIndex(d=>d.id===n);l!==-1?o.value[l].frame=`data:image/jpeg;base64,${i}`:o.value.push({id:n,frame:`data:image/jpeg;base64,${i}`})}}catch(e){console.error("WebSocket 数据解析失败",e)}},a.onerror=t=>{console.error("WebSocket 连接错误:",t)},m(()=>{console.log("Vue 组件挂载，WebSocket 监听中...")}),(t,s)=>(c(),r("div",k,[(c(!0),r(_,null,f(o.value,e=>(c(),r("img",{key:e.id,src:e.frame,alt:"Camera "+e.id},null,8,p))),128))]))}};export{v as default};
