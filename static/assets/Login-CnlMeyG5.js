import{_ as k,h,i as U,r as y,c as C,a as o,w as t,b as d,j as r,k as L,f as u,l as B,o as I,m as p,n as N}from"./index-C5kSJgGr.js";const R={class:"login-container"},S={class:"register-link"},q={__name:"Login",setup(E){const{appContext:m}=h(),c=m.config.globalProperties.$axios,_=B(),g=U(),s=y({username:"",password:""}),f={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},v=()=>{c.post("/login",s.value).then(n=>{n.data.message==="登录成功"?(p.success("登录成功"),N.post("http://localhost:5000/record",{username:s.value.username}).then(e=>{g.setUser(e.data)}),_.push("/home")):(console.log(n.data.message),p.error("用户名或密码错误"))})};return(n,e)=>{const i=r("el-input"),a=r("el-form-item"),x=r("el-button"),b=r("router-link"),w=r("el-form"),V=r("el-card");return I(),C("div",R,[o(V,{class:"login-box"},{default:t(()=>[e[5]||(e[5]=d("h2",{class:"login-title"},"用户登录",-1)),o(w,{model:s.value,rules:f,ref:"loginFormRef",onSubmit:L(v,["prevent"])},{default:t(()=>[o(a,{prop:"username"},{default:t(()=>[o(i,{modelValue:s.value.username,"onUpdate:modelValue":e[0]||(e[0]=l=>s.value.username=l),placeholder:"请输入用户名","prefix-icon":"User"},null,8,["modelValue"])]),_:1}),o(a,{prop:"password"},{default:t(()=>[o(i,{modelValue:s.value.password,"onUpdate:modelValue":e[1]||(e[1]=l=>s.value.password=l),type:"password",placeholder:"请输入密码","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),o(a,null,{default:t(()=>[o(x,{type:"primary","native-type":"submit",class:"login-btn"},{default:t(()=>e[2]||(e[2]=[u(" 立即登录 ")])),_:1})]),_:1}),d("div",S,[e[4]||(e[4]=u(" 没有账号？ ")),o(b,{to:"/register"},{default:t(()=>e[3]||(e[3]=[u("立即注册")])),_:1})])]),_:1},8,["model"])]),_:1})])}}},M=k(q,[["__scopeId","data-v-e463b2f4"]]);export{M as default};
