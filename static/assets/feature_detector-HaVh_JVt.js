import{_ as u,r as f,B as m,c as r,b as c,F as p,C as v,o as n,y as k}from"./index-C5kSJgGr.js";const b={class:"video-container"},g={class:"streams"},h=["src","alt"],S={__name:"feature_detector",setup(x){const o=f([]),s=new WebSocket("ws://localhost:5173/socket.io/?EIO=4&transport=websocket");return s.onopen=()=>{console.log("WebSocket 已连接")},s.onmessage=t=>{const a=t.data;if(a.startsWith("42"))try{const e=JSON.parse(a.slice(2));if(e[0]==="video_stream"){const{id:i,frame:d}=e[1],l=o.value.findIndex(_=>_.id===i);l!==-1?o.value[l].frame=`data:image/jpeg;base64,${d}`:o.value.push({id:i,frame:`data:image/jpeg;base64,${d}`})}}catch(e){console.error("WebSocket 数据解析失败",e)}},s.onerror=t=>{console.error("WebSocket 连接错误:",t)},m(()=>{console.log("Vue 组件挂载，WebSocket 监听中...")}),(t,a)=>(n(),r("div",b,[c("div",g,[(n(!0),r(p,null,v(o.value,e=>(n(),r("div",{key:e.id,class:"video-box"},[c("h3",null,k(e.id===1?"左摄像头":"右摄像头"),1),c("img",{src:e.frame,alt:"Camera "+e.id},null,8,h)]))),128))])]))}},w=u(S,[["__scopeId","data-v-e662fd39"]]);export{w as default};
